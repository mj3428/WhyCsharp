# CLR的执行模式
## 执行程序集的代码
托管程序集同时包含元数据和IL。IL是与CPU无关的机器语言。IL比大多数CPU机器语言都高级.IL能访问和操作对象类型，并提供了指令来创建和初始化对象、
调用对象上的虚方法以及直接操作数组元素。甚至提供了抛出和捕捉异常的指令来实现错误处理。  

*注:* 高级语言通常只公开了CLR全部功能的一个子集。然而，IL汇编语言允许开发人员访问CLR的全部功能。所以如果你选择的编程语言隐藏了你迫切需要的
CLR功能，可以换用IL汇编语言或者提供了所需的功能的另一种编程语言来写那部分代码。  

Main方法首次调用WriteLine时，JITComplier函数会被调用。JITComplier函数负责将方法的IL代码编译成本机CPU指令。JITComplier函数被调用时，它知道
要调用的时哪个方法，以及具体时神类型定义了改方法。然后,JITComplier会在定义程序集的元数据种查找被调用方法的IL。接着，JITComplier验证IL代码，
并将IL代码编译成本机CPU指令。本机cpu指令保存到动态分配的内存块种。然后，JITComplier回到CLR为类型创建的内部数据结构，找到与被调用方法对应的
那条记录，修改最初对JITComplier的引用，使其指向内存块（包括刚才编译好的本机cpu指令）的地址。最后JITComplier函数跳转到内存块种的代码。**这就是
Writeline方法的具体实现。**  

重要的是，由于已对writeline的代码进行了验证和编译，会直接执行内存块中的代码，完全跳过JITComplier函数。  

上述提过，JIT编译器将本机CPU指令存到动态内存中，即，应用程序终止，编译好的代码也会被丢弃
